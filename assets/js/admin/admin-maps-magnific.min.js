/**
 * Google Maps in Magnific
 *
 * @since 2.0
 */
var gmb_data;!function(e){"use strict";e(document).ready(function(){function a(){
//Initialize Magnific Too
e.magnificPopup.open({callbacks:{beforeOpen:function(){i(),
//Add save button
0===e(".magnific-submit").length&&e(".magnific-builder #postbox-container-1").append(r),
//Move metaboxes to sidebar and hide other none-GMB metaboxes in Magnific modal
s.each(function(a,i){var n=e(this),s=n.attr("id");
//Check that this is a GMB metabox
if("undefined"!=typeof s&&s.match(/^\google_maps/)){
//Move metaboxes to the sidebar
var r=n.parent();t(n),
//Only move and close if not in sidebar & not the map preview
"normal-sortables"==r.attr("id")&&"google_maps_preview_metabox"!==n.attr("id")&&(o="placeholder-"+l++,
//Move em
n.before('<div class="placeholder '+o+'"></div>').appendTo("#side-sortables").data("placeholder",o))}else
//hide non GMB metaboxes
e(this).addClass("mfp-hide");
//Disable metabox dragging/sorting
"undefined"!=typeof e.fn.sortable&&e(".meta-box-sortables").sortable({disabled:!0})})},open:function(){google.maps.event.trigger(window.map,"resize")},resize:function(){e.magnificPopup.instance.isOpen===!0&&i()},close:function(){s.removeClass("mfp-hide"),n.removeClass("mfp-hide"),n.removeClass("magnific-builder"),e("#postbox-container-1").outerHeight(""),
//reenable metabox dragging/sorting
"undefined"!=typeof e.fn.sortable&&e(".meta-box-sortables").sortable({disabled:!1}),
//Move back metaboxes to original positions
s.each(function(a,t){
// Move back out of container
e(this).appendTo(".placeholder."+e(this).data("placeholder")).unwrap().data("placeholder",void 0)}),
//Refresh Google Maps view
google.maps.event.trigger(window.map,"resize")}},//end callbacks
items:{src:n,type:"inline"},midClick:!0})}/**
		 * Close and toggle metaboxes
		 * @param postbox
		 */
function t(e){"google_maps_preview_metabox"===e.attr("id")?
//ensure Gmap metabox always is open
e.removeClass("closed"):
//Close all other GMB metaboxes by default
e.addClass("closed")}/**
		 * Window/Lightbox Resize
		 *
		 * @description: Resizes modal elements as the browser resizes & refreshes Google Maps
		 * @since 2.0
		 */
function i(){n.addClass("magnific-builder").height(d),e("#map").height(d),e("#postbox-container-1").outerHeight(d)}var o,n=e("form#post"),s=e(".postbox").not(".cmb-row, .cmb-repeatable-grouping"),r=(e("#map"),'<input name="save" type="submit" class="button button-primary button-large magnific-submit" id="publish" value="Update Map">'),l=0,d=e(window).height()-40;e("#map-builder").on("click",function(e){e.preventDefault(),a()}),
//Open by default?
"true"===gmb_data.modal_default&&a(),
//Submit button works
e("body").on("click",".magnific-submit",function(a){e("form#post").submit()})})}(jQuery);