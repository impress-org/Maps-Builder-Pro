/**
 *  Google Places Reviews JS: WP Admin Shortcode Generator
 *
 *  @description: JavaScripts for the shortcode generator iframe
 *  @since: 1.3
 */
!function(e){"use strict";
// Init
// @public
function t(){n(),
//iframe sizing
setTimeout(function(){e("body.iframe").css({height:"auto"})},200),
//New or Existing Shortcode?
c===!0&&(e(".new-shortcode").hide(),//hide lookup fields (already set)
e(".gmb-edit-shortcode").show(),//show edit options
e("#gmb_submit").val("Edit Shortcode"),//Change submit button text
o(a))}/**
	 * Set Existing Options
	 *
	 * @description Sets the generator options according to the user's already preset shortcode configuration
	 * @param custom_params obj
	 */
function o(t){
//Set variables from passed custom_params
var o=i(t.shortcode_params,"id");
//Set Place ID (very important)
//Set Place ID (very important)
return o?void e("#gmb_maps").val(o):(alert("There was no Map ID found for this shortcode. Please create a new one."),!1)}/**
	 * Shortcode Generator On Submit
	 *
	 * @description: Outputs the shortcode in TinyMCE and does minor validation
	 */
function n(){e("#gmb_settings").on("submit",function(t){t.preventDefault();
//Set our variables
var o,n=top.tinymce.activeEditor.windowManager.getParams(),i=e("#gmb_maps").val();
//Form the shortcode
o="["+n.shortcode,
//Start with the ID
i&&(o+=' id="'+i+'"'),o+="]",top.tinyMCE.activeEditor.execCommand("mceInsertContent",0,o),top.tinymce.activeEditor.windowManager.close()})}/**
	 * Get Attribute
	 *
	 * @description: Helper function that plucks options from passed string
	 */
function i(e,t){return t=new RegExp(t+'="([^"]+)"',"g").exec(e),t?window.decodeURIComponent(t[1]):""}var a="",c=!1;e(document).ready(function(){
//Cancel button (closes iframe modal)
e("#gmb_cancel").on("click",function(e){top.tinymce.activeEditor.windowManager.close(),e.preventDefault()}),a=top.tinyMCE.activeEditor.windowManager.getParams(),
//Are there custom params?
"undefined"!==a.shortcode_params&&(c=!0),
//Get things going for various functions
t()})}(jQuery);