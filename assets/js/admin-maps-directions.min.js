/**
 *  Maps Directions
 *
 *  @description: Adds directions functionality to the maps builder
 *  @copyright: http://opensource.org/licenses/gpl-2.0.php GNU Public License
 *  @since: 2.0
 */
var gmb_data;!function(e){"use strict";function n(n){if("undefined"==typeof n[0])return!1;var t=new google.maps.places.Autocomplete(n[0]);t.bindTo("bounds",map),
//Tame the enter key to not save the widget while using the dirs_autocomplete input
google.maps.event.addDomListener(n[0],"keydown",function(e){13==e.keyCode&&e.preventDefault()}),
//Autocomplete event listener
google.maps.event.addListener(t,"place_changed",function(){
//get place information
//set lat lng input values
return i=t.getPlace(),a=e(n).parents(".gmb-destination-fieldset").find(".gmb-directions-longitude"),r=e(n).parents(".gmb-destination-fieldset").find(".gmb-directions-latitude"),g=e(n).parents(".gmb-destination-fieldset").find(".gmb-directions-place_id"),a.val(i.geometry.location.lat()),r.val(i.geometry.location.lng()),g.val(i.place_id),i.geometry?(window.map.setCenter(i.geometry.location),void o(window.map,i.place_id)):void alert("Error: Place not found!")})}/**
	 * Shows a Marker when Autocomplete search is used
	 * @param map
	 * @param place_id
	 */
function o(e,n){var o=e.getCenter();
//Marker for map
d=new google.maps.Marker({map:e,title:"Map Icons",animation:google.maps.Animation.DROP,position:new google.maps.LatLng(o.lat(),o.lng()),icon:new google.maps.MarkerImage(gmb_data.plugin_url+"assets/img/temp-marker.png"),zIndex:google.maps.Marker.MAX_ZINDEX+1,optimized:!1})}{var t,i,a,r,g,d;new google.maps.DirectionsService}e(window).on("load",function(){t=new google.maps.DirectionsRenderer,e(".gmb-directions-autocomplete").each(function(o,t){n(e(this))}),e("#gmb_directions_group_repeat").on("cmb2_add_row",function(o,t){n(e(t).find(".gmb-directions-autocomplete"))})})}(jQuery);